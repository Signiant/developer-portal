# Using Media Shuttle SDK

The Media Shuttle SDK is a development module that allows customers with Enterprise subscriptions to develop  high-speed transfer applications to transfer files to and from Media Shuttle Share portals.

The Media Shuttle SDK exposes browser-based methods to authenticate using the Signiant Platform. Once authenticated, you can use your custom application to select an account and portal, browse the portal contents, and upload or download files using the Signiant App.

**Note**: The Signiant App is required to upload and download files using the Media Shuttle SDK.



The Media Shuttle SDK is provided as an [npm package](https://www.npmjs.com/package/@signiant/media-shuttle-sdk).

To install it into an existing project, run the following command:

```bash
> npm install `@signiant/media-shuttle-sdk`
```

To use the Media Shuttle SDK, Node.js version 16 or higher is required. For more information about updating your development environment, see the [npm documentation](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm).

This guide provides:

- A sample application using webpack to upload files
- A sample React JavaScript application to upload files

For more information about the Media Shuttle SDK, see the [documentation](https://developer.signiant.com/media-shuttle/media-shuttle-sdk.html).

For a complete list of the Media Shuttle SDK enumerators, classes, and interface, see the [SDK module reference](https://developer.signiant.com/sdk-documentation/media-shuttle/latest/modules.html).

## Prerequisites

To create an application that uses the Media Shuttle SDK you must have:

- An account licensed for Media Shuttle SDK usage. Contact your Signiant account manager to check your licensing agreement.

- A fully configured Share Portal that is deployed using an [SDCX Server](https://help.signiant.com/media-shuttle/account-administration/storage/signiant-server/install) or [cloud storage](https://help.signiant.com/media-shuttle/account-administration/storage/cloud-storage).

- A development environment suitable for Node.js 16 or higher

## Webpack Example

This section describes how to bundle and integrate Media Shuttle SDK into a JavaScript application for browsers using [webpack](https://webpack.js.org/guides/getting-started/).


### Initial Setup

1. In your terminal, create the application folder:

  ```bash
  > mkdir first-mediashuttle-sdk-app
   ```

2. In the application folder, initialize the project using `npm init`:

  ```bash
    > npm init -y
  ```


3. Install the webpack toolchain and Media Shuttle SDK:

  ```bash
    > npm install webpack webpack-cli webpack-dev-server --save-dev
    > npm install --save @signiant/media-shuttle-sdk
  ```

4. Open the project in a code editor such as Microsoft VSCode, Sublime Text, or Atom and open the `src/App.js` file.

5. Edit the `package.json` file and add  `build` and `start` commands to the `scripts` section:


  ```diff
  {
    "name": "first-mediashuttle-sdk-app",
    "version": "1.0.0",
    "description": "",
    "scripts": {
       "test": "echo \"Error: no test specified\" && exit 1",
  +    "build": "webpack",
  +    "start": "webpack serve --open"
    },
    ...
    "devDependencies": {
      "webpack": "^5.74.0",
      "webpack-cli": "^4.10.0",
      "webpack-dev-server": "^4.11.1"
    },
    "dependencies": {
      ...
    }
  }
  ```

### Configuring Webpack

To use webpack, you must create a configuration file to set where the application entry point is.

Create a `webpack.config.js` in the application root folder and use the following code to set your configuration:

```javascript
const path = require('path');
var webpack = require('webpack');

module.exports = {
  entry: './src/index.js',
  mode: 'none',
  devServer: {
    static: './dist',
  },
  output: {
    filename: 'main.js',
    path: path.resolve(__dirname, 'dist'),
  },
};
```

The `webpack.config.js` file directs webpack to use the `src/index.js` file as the entry point, and to generate `dist/main.js` as the application output when `npm start` is run.

### Testing the Toolchain

1. Create a `src` directory in the application folder:

  ```bash
  > mkdir src
  ```

2. Create a new file in the `src` directory called `index.js` and use the following code to create your application scaffold:

  ```javascript
  function component() {
     const element = document.createElement('div');
     element.innerHTML = 'MediaShuttleSDK first app';

     return element;
   }

   document.body.appendChild(component());
  ```

3. Create a `dist` directory in the application folder:

  ```bash
  > mkdir dist
  ```

4. Create a new file in the `dist` directory called `index.html` and include the following code to include the `main.js` script generated by webpack:

  ```html
  <!DOCTYPE html>
   <html>
     <head>
       <meta charset="utf-8" />
       <title>Getting Started</title>
     </head>
     <body>
      <script src="main.js"></script>
     </body>
   </html>
  ```

5. Run the application using `npm start`.

A new browser window will open displaying the page with the text string set by `element.innerHTML`.


### Authenticating The Application

The `MediaShuttleResourceFactory` class acts as the entry point to the SDK, providing access to the upload, download, and explorer methods which can be integrated into an application.

Before selecting a Share Portal, you must authenticate with the Signiant Platform using a valid user name and password.

Once authenticated, a Share portal can be set as the storage location for files transferred using the application.


**Note**: Do not publicly deploy the application when directly using your credentials in the application.

To authenticate with Media Shuttle:

1. Import the SDK module into `src/index.js`:

  ```diff
  + import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

  function component() {
     const element = document.createElement('div');
     element.innerHTML = 'MediaShuttleSDK first app';

     return element;
   }

   document.body.appendChild(component());

  ```

2. Create an instance of `MediaShuttleResourceFactory` that includes the `LoginCredentials` class with valid credentials, the `platformApiEndpoint`, and the `messagingServiceUrl`:


  ```diff
  import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

  function component() {
     const element = document.createElement('div');
     element.innerHTML = 'MediaShuttleSDK first app';
  +  // New instance of MediaShuttleResourceFactory
  +  const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
  +    new MediaShuttleSDK.LoginCredentials({
  +        username:'MediaShuttleUser',
  +        password: 'MediaShuttleUserPassword'
  +        }),
  +        {
  +          platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
  +          messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
  +        }
  +      );
      return element;
  }

  document.body.appendChild(component());

  ```


3. Use the `MediaShuttleResourceFactory` object to list all accounts the user is associated with:

```diff
import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

function component() {
   const element = document.createElement('div');
   element.innerHTML = 'MediaShuttleSDK first app';
  // get an instance of MediaShuttleResourceFactory
  const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
    new MediaShuttleSDK.LoginCredentials({
          username:'MediaShuttleUser',
          password: 'MediaShuttleUserPassword'
        }),
        {
          platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
          messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
        }
      );
+  mediaShuttleResourceFactory.getExplorer().listAccounts(true).then((response => {
+    console.log(JSON.stringify(response, null, 2));
+  }));
  return element;
}

document.body.appendChild(component());
```

4. Relaunch the app and open the browser console to view the list of accounts in JSON format:

```json
{
  "mediaShuttleAccounts": [
    {
      "serviceId": "13b5d081-....-2b812eba1576",
      "accountId": "88a0e4c9-....-8ea1651b1637",
      "name": "Example Account A"
    },
    {
      "serviceId": "396236f2-....-88c3989ded52",
      "accountId": "93316279-....-1de7625a0d25",
      "name": "Example Account B"
    }
  ]
}
```

5. Add the `accountId`, `serviceId`, and `accountToUse` to the application to configure the account information:


```diff
import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

function component() {
   const element = document.createElement('div');
   element.innerHTML = 'MediaShuttleSDK first app';
  // get an instance of MediaShuttleResourceFactory
  const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
    new MediaShuttleSDK.LoginCredentials({
          username:'MediaShuttleUser',
          password: 'MediaShuttleUserPassword'
        }),
        {
          platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
          messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
        }
      );
  mediaShuttleResourceFactory.getExplorer().listAccounts(true).then((response => {
    console.log(JSON.stringify(response, null, 2));
  // select the first account from the list
+    let accountToUse = response.mediaShuttleAccounts[0]
+    let accountId = accountToUse.accountId
+    let serviceId = accountToUse.serviceId
  }));
  return element;
}

document.body.appendChild(component());

```

### Using `getExplorer` to Select A Portal

Once you have an `accountId` and `serviceId`, you can access the `MediaShuttleResourceFactory.getExplorer.listportals` method to list all portals associated with the account, along with their corresponding `portalId`, which will be used as the upload destination for the application.

1. Add `mediaShuttleResourceFactory.getExplorer.listPortals` to the application, using the `accountId` and `serviceId` to list the portals associated with the account:

```diff
import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

function component() {
   const element = document.createElement('div');
   element.innerHTML = 'MediaShuttleSDK first app';
  // get an instance of MediaShuttleResourceFactory
  const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
    new MediaShuttleSDK.LoginCredentials({
          username:'MediaShuttleUser',
          password: 'MediaShuttleUserPassword'
        }),
        {
          platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
          messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
        }
      );
  mediaShuttleResourceFactory.getExplorer().listAccounts(true).then((response => {
    console.log(JSON.stringify(response, null, 2));
    // select the first account from the list
    let accountToUse = response.mediaShuttleAccounts[0]
    let accountId = accountToUse.accountId
    let serviceId = accountToUse.serviceId
+    mediaShuttleResourceFactory.getExplorer().listPortals({
+              accountId: accountId,
+              serviceId: serviceId,
+          }).then((portals => {
+            console.log(JSON.stringify(portals, null, 2));
+          }));
  return element;
}

document.body.appendChild(component());

```

2. Reload the application in the browser and open the browser console to see a list of the portals associated with the account in JSON format:

```json
[
  {
    "portalId": "3512a9a8-....-ff15f35d0f06",
    "name": "Example Portal",
    "url": "example-portal.mediashuttle.com",
    "createdOn": "2022-07-26T21:10:01.091Z",
    "lastModifiedOn": "2022-07-26T21:26:05.447Z",
    "accountId": "442c82d0-....-170fa39b2bb7",
    "type": "Share"
  },
  {
    "portalId": "7cee7072-....-be43-69d928abd619",
    "name": "Example Portal B",
    "url": "example-portal-b.mediashuttle.com",
    "createdOn": "2022-05-25T15:15:50.169Z",
    "lastModifiedOn": "2022-07-31T22:43:56.992Z",
    "accountId": "442c82d0-....-170fa39b2bb7",
    "type": "Share"
  }
]
```

3. Add the following code to select the first Share Portal associated with the account:

```diff
import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

function component() {
   const element = document.createElement('div');
   element.innerHTML = 'MediaShuttleSDK first app';
  // get an instance of MediaShuttleResourceFactory
  const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
    new MediaShuttleSDK.LoginCredentials({
          username:'MediaShuttleUser',
          password: 'MediaShuttleUserPassword'
        }),
        {
          platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
          messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
        }
      );
  mediaShuttleResourceFactory.getExplorer().listAccounts(true).then((response => {
    console.log(JSON.stringify(response, null, 2));
    // select the first account from the list
    let accountToUse = response.mediaShuttleAccounts[0]
    let accountId = accountToUse.accountId
    let serviceId = accountToUse.serviceId
    mediaShuttleResourceFactory.getExplorer().listPortals({
              accountId: accountId,
              serviceId: serviceId,
          }).then((portals => {
            console.log(JSON.stringify(portals, null, 2));
+            const sharePortal = portals.find(portal => portal.type === "Share");
+            if (typeof(sharePortal) !== 'undefined') {
+              let portalToUse = sharePortal
+              let portalId = portalToUse.portalId
+            }
          }));
  }));
  return element;
}

document.body.appendChild(component());


```

### Upload A File

You are now ready to select files from your local filesystem and upload them to your portal.

The Upload method can be invoked with the `MediaShuttleResourceFactory.generateUpload` method and the different ids gathered in the previous steps. The Upload method allows us first to open a file selector in the browser and then to trigger the transfer.

To upload a file:

1. Set the `uploadOptions` and add the `generateUpload` method to the application:


```diff
import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

function component() {
   const element = document.createElement('div');
   element.innerHTML = 'MediaShuttleSDK first app';
  // get an instance of MediaShuttleResourceFactory
  const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
    new MediaShuttleSDK.LoginCredentials({
          username:'MediaShuttleUser',
          password: 'MediaShuttleUserPassword'
        }),
        {
          platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
          messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
        }
      );
  mediaShuttleResourceFactory.getExplorer().listAccounts(true).then((response => {
    console.log(JSON.stringify(response, null, 2));
    // select the first account from the list
    let accountToUse = response.mediaShuttleAccounts[0]
    let accountId = accountToUse.accountId
    let serviceId = accountToUse.serviceId
    mediaShuttleResourceFactory.getExplorer().listPortals({
              accountId: accountId,
              serviceId: serviceId,
          }).then((portals => {
            console.log(JSON.stringify(portals, null, 2));
            const sharePortal = portals.find(portal => portal.type === "Share");
            if (typeof(sharePortal) !== 'undefined') {
              let portalToUse = sharePortal
              let portalId = portalToUse.portalId
+              const uploadOptions =
+              {
+                  portalId: portalId,
+                  serviceId: serviceId,
+                  accountId: accountId,
+                  force: true,
+                  destinationPath: "/"
+              }
+              mediaShuttleResourceFactory.generateUpload(uploadOptions).then((uploader => {
+                // open a file selector and add files to the uploader
+                uploader.addFiles().then (files => {
+                  console.log(JSON.stringify(files));
+                  // start uploading the selected files
+                  uploader.start();
+                });
+              }));              
            }
          }));
  }));
  return element;
}

document.body.appendChild(component());


```

2. Run or reload the application.

3. Select a file to upload and click **OK**.

Once the upload is completed, the file will be available in the linked Share Portal via the Media Shuttle portal interface.

### Full Code Example


  ```
  import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

  function component() {
     const element = document.createElement('div');
     element.innerHTML = 'MediaShuttleSDK first app';
    //get an instance of MediaShuttleResourceFactory
    const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
      new MediaShuttleSDK.LoginCredentials({
            username:'MediaShuttleUser',
            password: 'MediaShuttleUserPassword'
          }),
          {
            platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
            messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
          }
        );
    mediaShuttleResourceFactory.getExplorer().listAccounts(true).then((response => {
      console.log(JSON.stringify(response, null, 2));
      // select the first account from the list
      let accountToUse = response.mediaShuttleAccounts[0]
      let accountId = accountToUse.accountId
      let serviceId = accountToUse.serviceId
      mediaShuttleResourceFactory.getExplorer().listPortals({
                accountId: accountId,
                serviceId: serviceId,
            }).then((portals => {
              console.log(JSON.stringify(portals, null, 2));
              const sharePortal = portals.find(portal => portal.type === "Share");
              if (typeof(sharePortal) !== 'undefined') {
                let portalToUse = sharePortal
                let portalId = portalToUse.portalId
                const uploadOptions =
                {
                    portalId: portalId,
                    serviceId: serviceId,
                    accountId: accountId,
                    force: true,
                    destinationPath: "/"
                }
                mediaShuttleResourceFactory.generateUpload(uploadOptions).then((uploader => {
                  // open a file selector and add files to the uploader
                  uploader.addFiles().then (files => {
                    console.log(JSON.stringify(files));
                    // start uploading the selected files
                    uploader.start();
                  });
                }));              
              }
            }));
    }));
    return element;
  }

  document.body.appendChild(component());


  ```



## Example React Integration

This section describes how to integrate Media Shuttle SDK into a React application created using [create-react-app](https://reactjs.org/docs/create-a-new-react-app.html#create-react-app). Please ensure that `create-react-app` is installed before moving forward (eg. `npm install create-react-app -g`).

To create and authorize the integration:

1. Create a new application by running:

    `npx create-react-app second-mediashuttle-sdk-app`

    **Note**: Add `--template typescript` switch to the command above to develop with Typescript.

2. Move into the newly created Application folder:

    `cd second-mediashuttle-sdk-app`

3. Install the Media Shuttle SDK, available from the npm registry as an npm module:

    `npm install @signiant/media-shuttle-sdk`

4. Once the module has finished installing, run `npm start`

5. Open the project in a code editor such as Microsoft VSCode, Sublime Text, or Atom and open the `src/App.js` file.


6. Import the Media Shuttle SDK module, add a new function called `mediaShuttle`, and add a button element in the view section that triggers the `mediaShuttle` function.

```diff
import logo from './logo.svg';
import './App.css';
+ import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

+function mediaShuttle () {
+  
+}

function App() {
  return (
    <div className="App">
      <header className="App-header">
        <img src={logo} className="App-logo" alt="logo" />
        <p>
          Edit <code>src/App.js</code> and save to reload.
        </p>
        <a
          className="App-link"
          href="https://reactjs.org"
          target="_blank"
          rel="noopener noreferrer"
        >
          Learn React
        </a>
+        <div>
+          <button onClick={mediaShuttle}>Button</button>
+        </div>
      </header>
    </div>
  );
}

export default App;

```

7. In the `mediaShuttle` function, add a new instance of `MediaShuttleResourceFactory` that includes the necessary credentials and parameters:

```diff
import logo from './logo.svg';
import './App.css';
import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

function mediaShuttle () {
+  // get an instance of MediaShuttleResourceFactory
+  const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
+    new MediaShuttleSDK.LoginCredentials({
+        username:'MediaShuttleUser',
+        password: 'MediaShuttleUserPassword'
+        }),
+        {
+          platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
+          messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
+        }
+      );
}

function App() {
  return (
    <div className="App">
      <header className="App-header">
        <img src={logo} className="App-logo" alt="logo" />
        <p>
          Edit <code>src/App.js</code> and save to reload.
        </p>
        <a
          className="App-link"
          href="https://reactjs.org"
          target="_blank"
          rel="noopener noreferrer"
        >
          Learn React
        </a>
        <div>
          <button onClick={mediaShuttle}>Button</button>
        </div>
      </header>
    </div>
  );
}

export default App;

```

8. Use the `MediaShuttleResourceFactory.getExplorer` method to list all accounts the user is associated with:


```diff
import logo from './logo.svg';
import './App.css';
import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

function mediaShuttle () {
  // get an instance of MediaShuttleResourceFactory
  const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
    new MediaShuttleSDK.LoginCredentials({
          username:'MediaShuttleUser',
          password: 'MediaShuttleUserPassword'
        }),
        {
          platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
          messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
        }
      );
+  mediaShuttleResourceFactory.getExplorer().listAccounts(true).then((response => {
+    console.log(JSON.stringify(response, null, 2));
+  }));
}

function App() {
  return (
    <div className="App">
      <header className="App-header">
        <img src={logo} className="App-logo" alt="logo" />
        <p>
          Edit <code>src/App.js</code> and save to reload.
        </p>
        <a
          className="App-link"
          href="https://reactjs.org"
          target="_blank"
          rel="noopener noreferrer"
        >
          Learn React
        </a>
        <div>
          <button onClick={mediaShuttle}>Button</button>
        </div>
      </header>
    </div>
  );
}

export default App;

```

9. Relaunch the app, click the button and open the browser console to view the list of accounts in JSON format:

```json
{
  "mediaShuttleAccounts": [
    {
      "serviceId": "13b5d081-....-2b812eba1576",
      "accountId": "88a0e4c9-....-8ea1651b1637",
      "name": "Example Account A"
    },
    {
      "serviceId": "396236f2-....-88c3989ded52",
      "accountId": "93316279-....-1de7625a0d25",
      "name": "Example Account B"
    }
  ]
}
```

10. Add the `accountId`, `serviceId`, and `accountToUse` to the application to configure the account information:


```diff
import logo from './logo.svg';
import './App.css';
import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

function mediaShuttle () {
  // get an instance of MediaShuttleResourceFactory
  const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
    new MediaShuttleSDK.LoginCredentials({
          username:'MediaShuttleUser',
          password: 'MediaShuttleUserPassword'
        }),
        {
          platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
          messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
        }
      );
  mediaShuttleResourceFactory.getExplorer().listAccounts(true).then((response => {
    console.log(JSON.stringify(response, null, 2));
+    let accountToUse = response.mediaShuttleAccounts[0]
+    let accountId = accountToUse.accountId
+    let serviceId = accountToUse.serviceId
  }));
}

function App() {
  return (
    <div className="App">
      <header className="App-header">
        <img src={logo} className="App-logo" alt="logo" />
        <p>
          Edit <code>src/App.js</code> and save to reload.
        </p>
        <a
          className="App-link"
          href="https://reactjs.org"
          target="_blank"
          rel="noopener noreferrer"
        >
          Learn React
        </a>
        <div>
          <button onClick={mediaShuttle}>Button</button>
        </div>
      </header>
    </div>
  );
}

export default App;

```



### Using `getExplorer` to Select A Portal

Once you have an `accountId` and `serviceId`, you can use `MediaShuttleResourceFactory.getExplorer` to list all portals associated with the account, along with their corresponding `portalId`, which will be used as the upload destination for the application.


To select an upload portal:

1. Add the explorer function to the application:

```diff
import logo from './logo.svg';
import './App.css';
import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

function mediaShuttle () {
  // get an instance of MediaShuttleResourceFactory
  const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
    new MediaShuttleSDK.LoginCredentials({
          username:'MediaShuttleUser',
          password: 'MediaShuttleUserPassword'
        }),
        {
          platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
          messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
        }
      );
  mediaShuttleResourceFactory.getExplorer().listAccounts(true).then((response => {
    console.log(JSON.stringify(response, null, 2));
    let accountToUse = response.mediaShuttleAccounts[0]
    let accountId = accountToUse.accountId
    let serviceId = accountToUse.serviceId
+    mediaShuttleResourceFactory.getExplorer().listPortals({
+              accountId: accountId,
+              serviceId: serviceId,
+          }).then((portals => {
+            console.log(JSON.stringify(portals, null, 2));
+          }));
  }));

}

function App() {
  return (
    <div className="App">
      <header className="App-header">
        <img src={logo} className="App-logo" alt="logo" />
        <p>
          Edit <code>src/App.js</code> and save to reload.
        </p>
        <a
          className="App-link"
          href="https://reactjs.org"
          target="_blank"
          rel="noopener noreferrer"
        >
          Learn React
        </a>
        <div>
          <button onClick={mediaShuttle}>Button</button>
        </div>
      </header>
    </div>
  );
}

export default App;

```

2. Reload the application in the browser, click the button, and open the console to see a list of the portals associated with the account in JSON format:

```json
[
  {
    "portalId": "3512a9a8-....-ff15f35d0f06",
    "name": "Example Portal",
    "url": "example-portal.mediashuttle.com",
    "createdOn": "2022-07-26T21:10:01.091Z",
    "lastModifiedOn": "2022-07-26T21:26:05.447Z",
    "accountId": "442c82d0-....-170fa39b2bb7",
    "type": "Share"
  },
  {
    "portalId": "7cee7072-....-be43-69d928abd619",
    "name": "Example Portal B",
    "url": "example-portal-b.mediashuttle.com",
    "createdOn": "2022-05-25T15:15:50.169Z",
    "lastModifiedOn": "2022-07-31T22:43:56.992Z",
    "accountId": "442c82d0-....-170fa39b2bb7",
    "type": "Share"
  }
]
```

3. Add the following code to select the first Share Portal associated with the account:

```diff
import logo from './logo.svg';
import './App.css';
import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

function mediaShuttle () {
  // get an instance of MediaShuttleResourceFactory
  const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
    new MediaShuttleSDK.LoginCredentials({
          username:'MediaShuttleUser',
          password: 'MediaShuttleUserPassword'
        }),
        {
          platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
          messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
        }
      );
  mediaShuttleResourceFactory.getExplorer().listAccounts(true).then((response => {
    console.log(JSON.stringify(response, null, 2));
    let accountToUse = response.mediaShuttleAccounts[0]
    let accountId = accountToUse.accountId
    let serviceId = accountToUse.serviceId
    mediaShuttleResourceFactory.getExplorer().listPortals({
              accountId: accountId,
              serviceId: serviceId,
          }).then((portals => {
            console.log(JSON.stringify(portals, null, 2));
+            const sharePortal = portals.find(portal => portal.type === "Share");
+            if (typeof(sharePortal) !== 'undefined') {
+              let portalToUse = sharePortal
+              let portalId = portalToUse.portalId
+            }
          }));
  }));
}

function App() {
  return (
    <div className="App">
      <header className="App-header">
        <img src={logo} className="App-logo" alt="logo" />
        <p>
          Edit <code>src/App.js</code> and save to reload.
        </p>
        <a
          className="App-link"
          href="https://reactjs.org"
          target="_blank"
          rel="noopener noreferrer"
        >
          Learn React
        </a>
        <div>
          <button onClick={mediaShuttle}>Button</button>
        </div>
      </header>
    </div>
  );
}

export default App;

```

### Upload A File

The Upload method can be invoked with the `MediaShuttleResourceFactory` object and the different ids gathered in the previous steps. The Upload method allows us first to open a file selector in the browser and then to trigger the transfer.

To upload a file:

1. Add the following lines of code to the application:


```diff
import logo from './logo.svg';
import './App.css';
import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

function mediaShuttle () {
  // get an instance of MediaShuttleResourceFactory
  const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
    new MediaShuttleSDK.LoginCredentials({
          username:'MediaShuttleUser',
          password: 'MediaShuttleUserPassword'
        }),
        {
          platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
          messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
        }
      );
  mediaShuttleResourceFactory.getExplorer().listAccounts(true).then((response => {
    console.log(JSON.stringify(response, null, 2));
    let accountToUse = response.mediaShuttleAccounts[0]
    let accountId = accountToUse.accountId
    let serviceId = accountToUse.serviceId
    mediaShuttleResourceFactory.getExplorer().listPortals({
              accountId: accountId,
              serviceId: serviceId,
          }).then((portals => {
            console.log(JSON.stringify(portals, null, 2));
            const sharePortal = portals.find(portal => portal.type === "Share");
            if (typeof(sharePortal) !== 'undefined') {
              let portalToUse = sharePortal
              let portalId = portalToUse.portalId
+              const uploadOptions =
+              {
+                  portalId: portalId,
+                  serviceId: serviceId,
+                  accountId: accountId,
+                  force: true,
+                  destinationPath: "/"
+              }
+              mediaShuttleResourceFactory.generateUpload(uploadOptions).then((uploader => {
+                // open a file selector and add files to the uploader
+                uploader.addFiles().then (files => {
+                  console.log(JSON.stringify(files));
+                  // start uploading the selected files
+                  uploader.start();
+                });
+              }));              
            }
          }));
  }));
}

function App() {
  return (
    <div className="App">
      <header className="App-header">
        <img src={logo} className="App-logo" alt="logo" />
        <p>
          Edit <code>src/App.js</code> and save to reload.
        </p>
        <a
          className="App-link"
          href="https://reactjs.org"
          target="_blank"
          rel="noopener noreferrer"
        >
          Learn React
        </a>
        <div>
          <button onClick={mediaShuttle}>Button</button>
        </div>
      </header>
    </div>
  );
}

export default App;

```

2. Run or reload the application.

3. Click the button, select a file to upload, and click **OK**.

Once the upload is completed, the file will be available in the linked Share Portal via the Media Shuttle portal interface.


  ```javascript
  import logo from './logo.svg';
  import './App.css';
  import * as MediaShuttleSDK from '@signiant/media-shuttle-sdk';

  function mediaShuttle () {
    // get an instance of MediaShuttleResourceFactory
    const mediaShuttleResourceFactory = new MediaShuttleSDK.MediaShuttleResourceFactory(
      new MediaShuttleSDK.LoginCredentials({
            username:'MediaShuttleUser',
            password: 'MediaShuttleUserPassword'
          }),
          {
            platformApiEndpoint: "https://platform-api-service.services.cloud.signiant.com",
            messagingServiceUrl: "https://messaging-config-service.services.cloud.signiant.com"
          }
        );
    mediaShuttleResourceFactory.getExplorer().listAccounts(true).then((response => {
      console.log(JSON.stringify(response, null, 2));
      let accountToUse = response.mediaShuttleAccounts[0]
      let accountId = accountToUse.accountId
      let serviceId = accountToUse.serviceId
      mediaShuttleResourceFactory.getExplorer().listPortals({
                accountId: accountId,
                serviceId: serviceId,
            }).then((portals => {
              console.log(JSON.stringify(portals, null, 2));
              const sharePortal = portals.find(portal => portal.type === "Share");
              if (typeof(sharePortal) !== 'undefined') {
                let portalToUse = sharePortal
                let portalId = portalToUse.portalId
                const uploadOptions =
                {
                    portalId: portalId,
                    serviceId: serviceId,
                    accountId: accountId,
                    force: true,
                    destinationPath: "/"
                }
                mediaShuttleResourceFactory.generateUpload(uploadOptions).then((uploader => {
                  // open a file selector and add files to the uploader
                  uploader.addFiles().then (files => {
                    console.log(JSON.stringify(files));
                    // start uploading the selected files
                    uploader.start();
                  });
                }));              
              }
            }));
    }));
  }

  function App() {
    return (
      <div className="App">
        <header className="App-header">
          <img src={logo} className="App-logo" alt="logo" />
          <p>
            Edit <code>src/App.js</code> and save to reload.
          </p>
          <a
            className="App-link"
            href="https://reactjs.org"
            target="_blank"
            rel="noopener noreferrer"
          >
            Learn React
          </a>
          <div>
            <button onClick={mediaShuttle}>Button</button>
          </div>
        </header>
      </div>
    );
  }

  export default App;

  ```
